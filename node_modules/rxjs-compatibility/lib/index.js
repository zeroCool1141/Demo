'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.toV5 = toV5;
exports.toV4 = toV4;
exports.patchObservables = patchObservables;

var _Observable = require('rxjs/Observable');

var _rx = require('rx');

var _symbolObservable = require('symbol-observable');

var _symbolObservable2 = _interopRequireDefault(_symbolObservable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function toV5(input$) {
  var V5 = arguments.length <= 1 || arguments[1] === undefined ? _Observable.Observable : arguments[1];

  if (input$ instanceof V5) {
    return input$;
  } else {
    return V5.create(function (observer) {
      var subscription = input$.subscribe(observer.next.bind(observer), observer.error.bind(observer), observer.complete.bind(observer));

      return function () {
        return subscription.dispose();
      };
    });
  }
}

function toV4(input$) {
  var V4 = arguments.length <= 1 || arguments[1] === undefined ? _rx.Observable : arguments[1];

  if (input$ instanceof V4) {
    return input$;
  } else {
    return V4.create(function (observer) {
      var subscription = input$.subscribe(observer.onNext.bind(observer), observer.onError.bind(observer), observer.onCompleted.bind(observer));

      return function () {
        return subscription.unsubscribe();
      };
    });
  }
}

function patchObservables() {
  var V4 = arguments.length <= 0 || arguments[0] === undefined ? _rx.Observable : arguments[0];
  var V5 = arguments.length <= 1 || arguments[1] === undefined ? _Observable.Observable : arguments[1];

  V4.prototype.v5 = function v5() {
    return toV5(this, V5);
  };

  V4.prototype.v4 = function v4() {
    return this;
  };

  V5.prototype.v5 = function v5() {
    return this;
  };

  V5.prototype.v4 = function v4() {
    return toV4(this, V4);
  };
}